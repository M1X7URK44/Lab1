# Лабораторная работа №1. TCP/HTTP и первый сервер

## Описание проекта

Реализован упрощённый веб-сервер на основе TCP, который обслуживает HTTP-запросы для интернет-магазина. Сервер поддерживает базовую функциональность магазина: просмотр каталога товаров, авторизацию пользователей, создание заказов, управление товарами (для администраторов) и пополнение баланса.

Проект реализует интернет-магазин с разделением ролей (пользователь и администратор). Пользователи могут просматривать товары, покупать их, пополнять баланс и просматривать свои заказы. Администраторы имеют дополнительные возможности: добавление и редактирование товаров, просмотр всех пользователей и заказов.

## Структура проекта

- `Program.cs` — точка входа и запуск сервера
- `HttpServer.cs` — реализация TCP-сервера и парсинг HTTP-запросов
- `Router.cs` — маршрутизация запросов
- `Controllers/` — обработчики запросов:
  - `HomeController.cs` — главная страница
  - `StatusController.cs` — страница статуса магазина
  - `AuthController.cs` — авторизация пользователей
  - `ActionController.cs` — обработка действий (покупка, пополнение баланса и т.д.)
  - `ProductController.cs` — каталог товаров
- `Models/` — модели данных:
  - `User.cs` — пользователь
  - `Product.cs` — товар
  - `Order.cs` — заказ
  - `ProjectState.cs` — состояние приложения

## Функциональность

### Реализованные маршруты:
- `GET /` — главная страница с каталогом товаров
- `GET /status` — страница состояния проекта (товары, пользователи, заказы)
- `GET /login` — страница входа
- `POST /login` — обработка входа
- `POST /logout` — выход из системы
- `POST /action` — обработка действий (покупка, пополнение баланса, управление товарами)
- `GET /products` — каталог товаров с возможностью покупки

### Действия, доступные через `/action`:
1. **buy** — покупка товара (требует авторизации)
2. **add_balance** — пополнение баланса (требует авторизации)
3. **add_product** — добавление товара (только для администратора)
4. **update_product** — обновление товара (только для администратора)

## Тестовые данные

### Пользователи:
- **Администратор**: login: `admin`, password: `admin`
- **Пользователь**: login: `user`, password: `1234` (начальный баланс: 100 рублей)

### Товары:
1. Ноутбук — 50,000 ₽ (5 шт.)
2. Смартфон — 30,000 ₽ (10 шт.)
3. Наушники — 5,000 ₽ (20 шт.)
4. Клавиатура — 3,500 ₽ (15 шт.)

## Запуск

```bash
dotnet run
```

Сервер запустится на порту 8080. Откройте браузер и перейдите по адресу: `http://localhost:8080`

## Технические детали

- Сервер реализован на основе `TcpListener`
- HTTP-запросы парсятся вручную
- Состояние хранится в памяти (класс `ProjectState`)
- Сессии реализованы через cookies
- HTML-страницы генерируются динамически в контроллерах

